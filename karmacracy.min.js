function Karmacracy(j,b){var c=j;var g="http://karmacracy.com/api/v1/";var h=["en","es"];var i=function(k){var l=[];for(var m in k){if(!k.hasOwnProperty(m)){continue;
}if(Object.prototype.toString.call(k[m])=="[object Object]"){l.push(k[m].serialize());continue;}if(k[m]){l.push(m+"="+k[m]);}}return l.join("&");};var e=function(q,p,m,o){if(typeof p=="function"){o=m||null;
m=p;p={};}var n=XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");var k=f.call(this,q);var l=a.call(this,q,p);n.open(k,l,true);
n.onreadystatechange=function(){if(n.readyState==4){if(n.status==200){var r=d(q,n);if(r&&typeof o==="function"){o(r);}}}};n.onerror=m;n.send();};var f=function(k){return"GET";
};var d=function(m,l){var k=JSON.parse(l.responseText);if(k.error){return l.onerror(k);}if(k.data){k=k.data;}switch(m){case"user":k=k.user[0];break;case"awards":case"awards:nut":k=k.nut;
break;case"networks":k=k.network;break;case"domains":k=k.domain;break;case"kcy":case"world":k=k.kcy;break;case"rank":k=k.user;break;case"stats:evolution":k=k.stats;
k.links_evolution=JSON.parse(k.links_evolution);k.koi_evolution=JSON.parse(k.koi_evolution);k.clicks_evolution=JSON.parse(k.clicks_evolution);k.rank_evolution=JSON.parse(k.rank_evolution);
break;case"stats:relevance":k=k.stats;break;}return k;};var a=function(m,l){var k=g;l=l||{};l.u=l.u||this.userName;l.k=l.k||this.userKey;l.appkey=c;switch(m){case"key":k+=m+"/";
delete (l.k);l.p=encodeURIComponent(l.p);l=i(l);if(l!==""){k+="?"+l;}break;case"key:check":m=m.replace(":","/");k+=m+"/";l.key=l.k;delete (l.k);l=i(l);
if(l!==""){k+="?"+l;}break;case"user":case"awards":k+=[m,l.u].join("/");delete (l.u);l=i(l);if(l!==""){k+="?"+l;}break;case"awards:nut":if(!l.n){return false;
}m=m.split(":");k+=[m[0],l.u,m[1],l.n].join("/");l.lang=this.lang;delete (l.u);delete (l.n);l=i(l);if(l!==""){k+="?"+l;}break;case"networks:fbpages":m=m.replace(":","/");
k+=m+"/";l=i(l);if(l!==""){k+="?"+l;}break;case"stats:evolution":case"stats:relevance":m=m.replace(":","/");k+=m+"/";delete (l.k);l=i(l);if(l!==""){k+="?"+l;
}break;case"kcy":case"world":k+=[m,l.kcy].join("/");delete (l.kcy);delete (l.u);delete (l.k);l=i(l);if(l!==""){k+="?"+l;}break;case"networks":case"domains":case"rank":k+=m+"/";
l=i(l);if(l!==""){k+="?"+l;}break;case"share":k+=m+"/";l.txt=encodeURIComponent(l.txt);l=i(l);if(l!==""){k+="?"+l;}break;case"shortLink":k="http://kcy.me/api/";
l.format="json";l.key=l.k;l.url=encodeURIComponent(l.url);delete (l.k);l=i(l);if(l!==""){k+="?"+l;}break;}return k;};this.setLang=function(k){this.lang=k||(typeof navigaror!=="undefined"?(navigator.language||navigator.userLanguage):null);
if(!(this.lang in h)){this.lang=h[0];}return this.lang;};this.setUserKey=function(k){this.userKey=k;return this.userKey;};this.setUserName=function(k){this.userName=k;
return this.userName;};this.setUser=function(k,l){this.setUserName(k);this.setUserKey(l);};this.getKey=function(m,k,l){var n="key";m.regenerate=0;e.call(this,n,m,k,l);
};this.getNewKey=function(m,k,l){var n="key";m.regenerate=1;e.call(this,n,m,k,l);};this.checkKey=function(m,k,l){var n="key:check";e.call(this,n,m,k,l);
};this.getUserInfo=function(m,k,l){var n="user";e.call(this,n,m,k,l);};this.getNuts=function(m,k,l){var n="awards";e.call(this,n,m,k,l);};this.getNut=function(m,k,l){var n="awards:nut";
e.call(this,n,m,k,l);};this.getNetworks=function(k,l){var m="networks";e.call(this,m,k,l);};this.getFacebookPages=function(m,k,l){var n="networks:fbpages";
e.call(this,n,m,k,l);};this.getDomains=function(m,k,l){var n="domains";e.call(this,n,m,k,l);};this.getKcy=function(m,k,l){var n="kcy";e.call(this,n,m,k,l);
};this.getKcys=function(m,k,l){var n="world";e.call(this,n,m,k,l);};this.getRank=function(m,k,l){var n="rank";e.call(this,n,m,k,l);};this.getStatsEvolution=function(m,k,l){var n="stats:evolution";
e.call(this,n,m,k,l);};this.getStatsRelevance=function(m,k,l){var n="stats:relevance";e.call(this,n,m,k,l);};this.shortLink=function(m,k,l){var n="shortLink";
e.call(this,n,m,k,l);};this.shareKcy=function(m,k,l){var n="share";e.call(this,n,m,k,l);};this.setLang(b);}if(typeof module!=="undefined"&&module.exports){var XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;
module.exports=Karmacracy;}
