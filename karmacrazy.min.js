function serializeObject(a){var b=[];for(var c in a){if(!a.hasOwnProperty(c)){continue;}if(Object.prototype.toString.call(a[c])=="[object Object]"){b.push(a[c].serialize());
continue;}b.push(c+"="+a[c]);}return b.join("&");}function Karmacrazy(i,b){var c=i;var g="http://karmacracy.com/api/v1/";var h=["en","es"];var e=function(p,o,l,n){if(typeof o=="function"){n=l||null;
l=o;o={};}var m=XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");var j=f.call(this,p);var k=a.call(this,p,o);m.open(j,k,true);
m.onreadystatechange=function(){if(m.readyState==4){if(m.status==200){var q=d(p,m);if(typeof n==="function"){n(q);}}}};m.onerror=function(q){if(typeof l==="function"){l(q);
}};m.send();};var f=function(j){return"GET";};var d=function(l,k){var j=JSON.parse(k.responseText);if(j.data){j=j.data;}switch(l){case"user":j=j.user[0];
break;case"awards":case"awards:nut":j=j.nut;break;case"networks":j=j.network;break;case"domains":j=j.domain;break;case"kcy":case"world":j=j.kcy;break;case"rank":j=j.user;
break;case"stats:evolution":j=j.stats;j.links_evolution=JSON.parse(j.links_evolution);j.koi_evolution=JSON.parse(j.koi_evolution);j.clicks_evolution=JSON.parse(j.clicks_evolution);
j.rank_evolution=JSON.parse(j.rank_evolution);break;case"stats:relevance":j=j.stats;break;}return j;};var a=function(l,k){var j=g;k=k||{};k.u=k.u||this.userName;
k.k=k.k||this.userKey;k.appkey=c;switch(l){case"key":j+=l+"/";delete (k.k);k.p=encodeURIComponent(k.p);k=serializeObject(k);if(k!==""){j+="?"+k;}break;
case"key:check":l=l.replace(":","/");j+=l+"/";k.key=k.k;delete (k.k);k=serializeObject(k);if(k!==""){j+="?"+k;}break;case"user":case"awards":j+=[l,k.u].join("/");
delete (k.u);k=serializeObject(k);if(k!==""){j+="?"+k;}break;case"awards:nut":if(!k.n){return false;}l=l.split(":");j+=[l[0],k.u,l[1],k.n].join("/");k.lang=this.lang;
delete (k.u);delete (k.n);k=serializeObject(k);if(k!==""){j+="?"+k;}break;case"networks:fbpages":l=l.replace(":","/");j+=l+"/";k=serializeObject(k);if(k!==""){j+="?"+k;
}break;case"stats:evolution":case"stats:relevance":l=l.replace(":","/");j+=l+"/";delete (k.k);k=serializeObject(k);if(k!==""){j+="?"+k;}break;case"kcy":case"world":j+=[l,k.kcy].join("/");
delete (k.kcy);delete (k.u);delete (k.k);k=serializeObject(k);if(k!==""){j+="?"+k;}break;case"networks":case"domains":case"rank":j+=l+"/";k=serializeObject(k);
if(k!==""){j+="?"+k;}break;case"share":j+=l+"/";k.txt=encodeURIComponent(k.txt);k=serializeObject(k);if(k!==""){j+="?"+k;}break;case"shortLink":j="http://kcy.me/api/";
k.format="json";k.key=k.k;k.url=encodeURIComponent(k.url);delete (k.k);k=serializeObject(k);if(k!==""){j+="?"+k;}break;}return j;};this.setLang=function(j){this.lang=j||navigator.language||navigator.userLanguage;
if(!(this.lang in h)){this.lang=h[0];}return this.lang;};this.setUserKey=function(j){this.userKey=j;return this.userKey;};this.setUserName=function(j){this.userName=j;
return this.userName;};this.setUser=function(j,k){this.setUserName(j);this.setUserKey(k);};this.getKey=function(l,j,k){var m="key";l.regenerate=0;e.call(this,m,l,j,k);
};this.getNewKey=function(l,j,k){var m="key";l.regenerate=1;e.call(this,m,l,j,k);};this.checkKey=function(l,j,k){var m="key:check";e.call(this,m,l,j,k);
};this.getUserInfo=function(l,j,k){var m="user";e.call(this,m,l,j,k);};this.getNuts=function(l,j,k){var m="awards";e.call(this,m,l,j,k);};this.getNut=function(l,j,k){var m="awards:nut";
e.call(this,m,l,j,k);};this.getNetworks=function(l,j,k){var m="networks";e.call(this,m,l,j,k);};this.getFacebookPages=function(l,j,k){var m="networks:fbpages";
e.call(this,m,l,j,k);};this.getDomains=function(l,j,k){var m="domains";e.call(this,m,l,j,k);};this.getKcy=function(l,j,k){var m="kcy";e.call(this,m,l,j,k);
};this.getKcys=function(l,j,k){var m="world";e.call(this,m,l,j,k);};this.getRank=function(l,j,k){var m="rank";e.call(this,m,l,j,k);};this.getStatsEvolution=function(l,j,k){var m="stats:evolution";
e.call(this,m,l,j,k);};this.getStatsRelevance=function(l,j,k){var m="stats:relevance";e.call(this,m,l,j,k);};this.shortLink=function(l,j,k){var m="shortLink";
e.call(this,m,l,j,k);};this.shareKcy=function(l,j,k){var m="share";e.call(this,m,l,j,k);};this.setLang(b);}
